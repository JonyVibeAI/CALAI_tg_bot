# üöÄ –î–µ–ø–ª–æ–π –Ω–∞ Timeweb Cloud App Platform

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞

- ‚úÖ `docker-compose.yml` –±–µ–∑ volumes –≤ –∫–æ—Ä–Ω–µ
- ‚úÖ `backend/Dockerfile` —Å multi-stage build
- ‚úÖ `backend/package-lock.json` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- ‚úÖ Health endpoint –Ω–∞ `/health`

## üß™ –õ–æ–∫–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

### 1. –°–æ–∑–¥–∞–π `.env` —Ñ–∞–π–ª –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```bash
POSTGRES_USER=calai
POSTGRES_PASSWORD=calai_password
POSTGRES_DB=calai_db
OPENAI_API_KEY=—Ç–≤–æ–π_–∫–ª—é—á_openai
TELEGRAM_BOT_TOKEN=—Ç–≤–æ–π_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞
OPENAI_MODEL_TEXT=gpt-4o-mini
OPENAI_MODEL_VISION=gpt-4o
NODE_ENV=production
```

### 2. –ó–∞–ø—É—Å—Ç–∏ –ª–æ–∫–∞–ª—å–Ω–æ:

```bash
# –ü–æ—Å—Ç—Ä–æ–π –∏ –∑–∞–ø—É—Å—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose up --build

# –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –ø—Ä–æ–≤–µ—Ä—å health
curl http://localhost:4000/health
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è:
```json
{"status":"ok","timestamp":"2025-12-10T..."}
```

### 3. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏:

```bash
docker-compose logs -f bot
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
‚úì –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∞
‚úì Health server –Ω–∞ –ø–æ—Ä—Ç—É 4000
‚úì –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω
```

### 4. –û—Å—Ç–∞–Ω–æ–≤–∏:

```bash
docker-compose down
```

---

## üåê –î–µ–ø–ª–æ–π –Ω–∞ Timeweb App Platform

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

1. –ó–∞–π–¥–∏ –Ω–∞ https://timeweb.cloud/
2. –ü–µ—Ä–µ–π–¥–∏ –≤ **Cloud ‚Üí App Platform**
3. –ù–∞–∂–º–∏ **"–°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"**

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

1. **–¢–∏–ø –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**: Docker Compose
2. **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**: `https://github.com/JonyVibeAI/CALAI_tg_bot`
3. **–í–µ—Ç–∫–∞**: `main`
4. **–ö–æ—Ä–Ω–µ–≤–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è**: `/` (–∫–æ—Ä–µ–Ω—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è)
5. **–§–∞–π–ª**: `docker-compose.yml`

### –®–∞–≥ 3: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í —Ä–∞–∑–¥–µ–ª–µ **"–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è"** –¥–æ–±–∞–≤—å:

| –ö–ª—é—á | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ |
|------|----------|-------------|
| `POSTGRES_USER` | `calai` | ‚úÖ |
| `POSTGRES_PASSWORD` | `–≤–∞—à_—Å–ª–æ–∂–Ω—ã–π_–ø–∞—Ä–æ–ª—å` | ‚úÖ |
| `POSTGRES_DB` | `calai_db` | ‚úÖ |
| `OPENAI_API_KEY` | `sk-...` | ‚úÖ |
| `TELEGRAM_BOT_TOKEN` | `1234567890:ABC...` | ‚úÖ |
| `OPENAI_MODEL_TEXT` | `gpt-4o-mini` | ‚ö™ |
| `OPENAI_MODEL_VISION` | `gpt-4o` | ‚ö™ |
| `NODE_ENV` | `production` | ‚ö™ |

‚ö†Ô∏è **–í–ê–ñ–ù–û**: –ò—Å–ø–æ–ª—å–∑—É–π —Å–ª–æ–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å –¥–ª—è `POSTGRES_PASSWORD`!

### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–µ–ø–ª–æ—è

1. **–ê–≤—Ç–æ–¥–µ–ø–ª–æ–π**: ‚úÖ –í–∫–ª—é—á–∏—Ç—å (–ø—Ä–∏ –ø—É—à–µ –≤ `main`)
2. **–†–µ–≥–∏–æ–Ω**: –í—ã–±–µ—Ä–∏ –±–ª–∏–∂–∞–π—à–∏–π –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
3. **–ü–ª–∞–Ω**: –ú–∏–Ω–∏–º—É–º **Standard** (–Ω—É–∂–Ω–æ –¥–ª—è –¥–≤—É—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤)

### –®–∞–≥ 5: –î–µ–ø–ª–æ–π

1. –ù–∞–∂–º–∏ **"–°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"**
2. –î–æ–∂–¥–∏—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–±–æ—Ä–∫–∏ (~5-10 –º–∏–Ω—É—Ç)
3. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏:
   - –û—Ç–∫—Ä–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
   - –ü–µ—Ä–µ–π–¥–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **"–õ–æ–≥–∏"**
   - –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `‚úì –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω`

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –í Telegram –±–æ—Ç–µ:

1. –û—Ç–ø—Ä–∞–≤—å `/start`
2. –°–∫–∏–Ω—å —Ñ–æ—Ç–æ –µ–¥—ã
3. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –±–æ—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–ª –∏ —Å–æ—Ö—Ä–∞–Ω–∏–ª

### –í Timeweb –ø–∞–Ω–µ–ª–∏:

1. **–õ–æ–≥–∏** ‚Üí –ü—Ä–æ–≤–µ—Ä—å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—à–∏–±–æ–∫
2. **–ú–µ—Ç—Ä–∏–∫–∏** ‚Üí CPU/RAM –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω—ã
3. **Health checks** ‚Üí –°—Ç–∞—Ç—É—Å `healthy`

---

## üõ†Ô∏è Troubleshooting

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç:

```bash
# –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ –≤ Timeweb –ø–∞–Ω–µ–ª–∏
# –£–±–µ–¥–∏—Å—å, —á—Ç–æ TELEGRAM_BOT_TOKEN –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
```

### –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î:

```bash
# –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ postgres –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—Å—Ç–∏–ª—Å—è
# –ü—Ä–æ–≤–µ—Ä—å POSTGRES_* –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
```

### Out of Memory:

```bash
# –£–≤–µ–ª–∏—á—å –ø–ª–∞–Ω –Ω–∞ Timeweb
# –ò–ª–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–π –∑–∞–ø—Ä–æ—Å—ã –∫ OpenAI
```

---

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞

–ü—Ä–æ—Å—Ç–æ —Å–¥–µ–ª–∞–π `git push` –≤ `main` –≤–µ—Ç–∫—É:

```bash
git add .
git commit -m "update: —É–ª—É—á—à–∏–ª —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –µ–¥—ã"
git push origin main
```

Timeweb –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å–æ–±–µ—Ä—ë—Ç –∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç! üöÄ

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–°–ª–µ–¥–∏ –∑–∞:
- **CPU**: –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ > 80%
- **RAM**: –Ω–µ –¥–æ–ª–∂–Ω–∞ —Ä–∞—Å—Ç–∏ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ (memory leak)
- **Health checks**: –¥–æ–ª–∂–Ω—ã –ø—Ä–æ—Ö–æ–¥–∏—Ç—å
- **–õ–æ–≥–∏**: –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å ERROR

---

## üí∞ –ü—Ä–∏–º–µ—Ä–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å

- **Standard –ø–ª–∞–Ω**: ~500-1000‚ÇΩ/–º–µ—Å
- **OpenAI API**: –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (~$0.50 –Ω–∞ 1000 –∑–∞–ø—Ä–æ—Å–æ–≤)

–ò—Ç–æ–≥–æ: ~1000-2000‚ÇΩ/–º–µ—Å –¥–ª—è –Ω–µ–±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

---

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ –≤ Timeweb –ø–∞–Ω–µ–ª–∏
2. –£–±–µ–¥–∏—Å—å, —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∑–∞–¥–∞–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–æ—Å—Ç—É–ø–µ–Ω (Public –∏–ª–∏ —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞)

–£–¥–∞—á–∏! üéâ
